<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bluetooth Thermal Printer Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex justify-content-center align-items-center vh-100 bg-light">

<div class="text-center">
    <h1>ðŸ§¾ Thermal Printer</h1>
    <button id="connectPrint" class="btn btn-primary btn-lg mt-3">Connect & Print</button>
</div>

<script>
    document.getElementById('connectPrint').addEventListener('click', async () => {
        try {
            const device = await navigator.bluetooth.requestDevice({
                filters: [{ services: ['printer_service'] }],
                optionalServices: [0x1101] // Serial Port Profile (SPP)
            });

            const server = await device.gatt.connect();
            const service = await server.getPrimaryService('printer_service');
            const characteristic = await service.getCharacteristic('printer_write');

            // Example ESC/POS commands (basic text print)
            const encoder = new TextEncoder();
            const data = encoder.encode("Hello from Bluetooth Thermal Printer!\n\n\n");

            await characteristic.writeValue(data);

            alert('Printed Successfully!');
        } catch (error) {
            console.error(error);
            alert('Failed to connect or print: ' + error);
        }
    });
</script>

</body>
</html>
